(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{214:function(e,t){var a=Array.isArray;e.exports=a},227:function(e,t){e.exports=function(e,t){for(var a=-1,n=null==e?0:e.length,r=Array(n);++a<n;)r[a]=t(e[a],a,e);return r}},235:function(e,t){e.exports=function(){return!1}},538:function(e,t,a){var n=a(227),r=a(539),l=a(214),i=a(235),s=a(540),o=a(542),c=a(543);e.exports=function(e){return l(e)?n(e,o):i(e)?[e]:r(s(c(e)))}},539:function(e,t){e.exports=function(e,t){var a=-1,n=e.length;for(t||(t=Array(n));++a<n;)t[a]=e[a];return t}},540:function(e,t,a){var n=a(541),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g,i=n((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(r,(function(e,a,n,r){t.push(n?r.replace(l,"$1"):a||e)})),t}));e.exports=i},541:function(e,t){e.exports=function(e){return e}},542:function(e,t){e.exports=function(e){return e}},543:function(e,t){e.exports=function(e){return e}},551:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(3),i=a.n(l),s=a(2),o=a(538),c=a.n(o),m=a(19),p=a(1),u=a(5),d=a.n(u);const f={Accept:"application/json"};function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const y={subject:{cn:"test",ou:["SPRT"]},san:{dNSName:["test"],iPAddress:["1.1.1.1"]},key_type:"rsa",key_length:"2048",digest:"sha256",ext_key_usage:{clientAuth:!0,serverAuth:!1},key_usage:{}},E={rfc822Name:"RFC822 Name (can be MAC)",dNSName:"DNS Name",directoryName:"Directory Name",uniformResourceIdentifier:"Uniform Resource Identifier",iPAddress:"IP Address"},h={sha1:"SHA-1",sha256:"SHA-256",sha384:"SHA-384",sha512:"SHA-512"},b={clientAuth:"Client Authentication",serverAuth:"Server Authentication",codeSigning:"Code Signing",emailProtection:"Email Protection",timeStamping:"Time Stamping"},k={digitalSignature:"Digital Signature",nonRepudiation:"Non Repudiation",keyEncipherment:"Key Encipherment",dataEncipherment:"Data Encipherment",keyAgreement:"Key Agreement",keyCertSign:"Key CertSign",cRLSign:"CRL Sign",encipherOnly:"Encipher Only",decipherOnly:"Decipher Only"},x=["cn","ou","o","l","st","c","e"],v=(...e)=>e.filter(e=>null!=e).join("."),N={},O=(e,t,a)=>{const n={short:t,full:e,display:a};N[t]=n,N[e]=n};O("commonName","CN","Common Name"),O("countryName","C","Country"),O("localityName","L","Locality"),O("stateOrProvinceName","ST","State or Province"),O("organizationName","O","Organization"),O("organizationalUnitName","OU","Organizational Unit"),O("emailAddress","E","Email Address");const A=e=>r.a.createElement(m.a,g({mountOnEnter:!0,unmountOnExit:!0,appear:!0,classNames:{appear:"animated fadeIn fastest",appearActive:"animated fadeIn fastest",appearDone:"animated",enter:"animated fadeIn fastest",enterActive:"animated fadeIn fastest",enterDone:"animated",exit:"fanimated fadeOut fastest",exitActive:"animated fadeOut fastest",exitDone:"hide"},timeout:300},e)),j=({title:e,children:t,in:a})=>{const[n,l]=r.a.useState(a);return r.a.createElement("div",{className:`drawer half-margin-bottom${n?" drawer--opened":""}`},r.a.createElement("div",{className:"drawer__header",onClick:()=>l(e=>!e),style:{cursor:"pointer"}},r.a.createElement("a",{className:"dbl-margin-right flex flex-center-vertical"},r.a.createElement("h5",{className:"no-margin-bottom"},e))),r.a.createElement(A,{in:n},t))};j.propTypes={title:i.a.node.isRequired,children:i.a.node.isRequired,in:i.a.bool},j.defaultProps={in:!1};const C=({children:e})=>{const t=r.a.Children.only(e),{setFieldValue:a,values:n,unregisterField:l}=Object(s.useFormikContext)(),i=t.props.name,o=r.a.useCallback(()=>{const e=c()(i);if(Object(s.isInteger)(e[e.length-1])){const t=e.slice(0,e.length-1).join("."),r=Object(s.getIn)(n,t);return r.splice(e[e.length-1],1),void a(t,r,!1)}a(i,void 0,!1),l(i)},[i,n]);return r.a.createElement("div",{className:"flex separate"},r.a.cloneElement(t,{className:`${t.props.className} flex-fill`}),r.a.createElement(p.ButtonGroup,{square:!0,size:"large",className:"half-margin-left base-margin-top"},r.a.createElement(p.Button,{icon:!0,color:"link",onClick:o,"data-balloon":"Remove","data-balloon-pos":"up"},r.a.createElement("span",{className:"icon-remove"}))))};C.propTypes={children:i.a.node.isRequired};const F=({el:e,path:t,label:a})=>null==e?null:Array.isArray(e)?e.map((e,n)=>r.a.createElement(C,{key:n},r.a.createElement(s.Field,{component:p.Input,name:v(t,n),label:a,className:"fadeIn faster"}))):r.a.createElement(C,null,r.a.createElement(s.Field,{component:p.Input,name:t,label:a,className:"fadeIn faster"}));F.propTypes={el:i.a.oneOfType([i.a.array,i.a.string]).isRequired,path:i.a.string.isRequired,label:i.a.node.isRequired};const S=({prefix:e})=>{const{values:t,setFieldValue:a}=Object(s.useFormikContext)(),n=Object(s.getIn)(t,v(e,"subject"),{}),l=r.a.useCallback(n=>{const r=v(e,"subject",n),l=Object(s.getIn)(t,r,[]);a(r,[...Array.isArray(l)?l:[l],""])},[e,t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex flex-center-vertical"},r.a.createElement("h5",{className:"no-margin-bottom half-margin-right"},"Subject"),r.a.createElement(p.Dropdown,{type:"link",header:"Add",alwaysClose:!0,className:"btn--dropdown"},x.map(e=>r.a.createElement("a",{onClick:()=>l(e),key:e},N[e.toUpperCase()].display,` (${e.toUpperCase()})`)))),r.a.createElement("div",{className:"panel"},x.map(t=>r.a.createElement(F,{key:t,el:n[t],path:v(e,"subject",t),label:N[t.toUpperCase()].display}))))};S.propTypes={prefix:i.a.string.isRequired};const I=({prefix:e})=>{const{values:t,setFieldValue:a}=Object(s.useFormikContext)(),n=r.a.useMemo(()=>v(e,"san"),[e]),l=Object(s.getIn)(t,n,{}),i=r.a.useCallback(e=>{const r=v(n,e),l=Object(s.getIn)(t,r,[]);a(r,[...Array.isArray(l)?l:[l],""])},[n,t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex flex-center-vertical half-margin-top"},r.a.createElement("h5",{className:"no-margin-bottom half-margin-right"},"Subject Alternative Names (SAN)"),r.a.createElement(p.Dropdown,{type:"link",header:"Add",alwaysClose:!0,className:"btn--dropdown"},Object.keys(E).sort().map(e=>r.a.createElement("a",{onClick:()=>i(e),key:e},E[e])))),r.a.createElement("div",{className:"panel"},Object.keys(l)?Object.keys(l).sort().map(e=>r.a.createElement(F,{key:e,el:l[e],path:v(n,e),label:E[e]})):null))};I.propTypes={prefix:i.a.string.isRequired};const R=({prefix:e})=>{const t=r.a.useMemo(()=>v(e,"key_length"),[e]),a=r.a.useMemo(()=>v(e,"digest"),[e]),{values:n,setFieldValue:l}=Object(s.useFormikContext)();return r.a.useLayoutEffect(()=>{void 0===Object(s.getIn)(n,a,void 0)&&l(a,"sha256",!1)},[a,n]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",{className:"no-margin-bottom"},"RSA Parameters"),r.a.createElement("div",{className:"panel"},r.a.createElement(s.Field,{component:p.Input,name:t,label:"RSA Key Length",type:"number"}),r.a.createElement(s.Field,{component:p.Select,title:"Digest",name:a},Object.keys(h).map(e=>r.a.createElement("option",{key:e,value:e},h[e])))))};R.propTypes={prefix:i.a.string.isRequired};const w=({prefix:e})=>{const{values:t,setFieldValue:a}=Object(s.useFormikContext)(),n=r.a.useMemo(()=>v(e,"key_usage"),[e]),l=r.a.useMemo(()=>!!Object.keys(Object(s.getIn)(t,n,{})).length,[n]);return r.a.useLayoutEffect(()=>{Object.keys(k).forEach(e=>{void 0===Object(s.getIn)(t,v(n,e),void 0)&&a(v(n,e),!1)})},[n]),r.a.createElement(p.AccordionElement,{defaultOpen:l,title:"Key Usage",toggles:!0},r.a.createElement("div",{className:"half-padding-left base-margin-bottom"},Object.keys(k).map(e=>r.a.createElement(s.Field,{component:p.Checkbox,name:v(n,e),key:e},k[e]))))};w.propTypes={prefix:i.a.string.isRequired};const q=({prefix:e})=>{const{values:t,setFieldValue:a}=Object(s.useFormikContext)(),n=r.a.useMemo(()=>v(e,"ext_key_usage"),[e]),l=r.a.useMemo(()=>!!Object.keys(Object(s.getIn)(t,n,{})).length,[n]);return r.a.useLayoutEffect(()=>{Object.keys(b).forEach(e=>{void 0===Object(s.getIn)(t,v(n,e),void 0)&&a(v(n,e),!1)})},[n]),r.a.createElement(p.AccordionElement,{defaultOpen:l,title:"Extended Key Usage",toggles:!0},r.a.createElement("div",{className:"half-padding-left base-margin-bottom"},Object.keys(b).map(e=>r.a.createElement(s.Field,{component:p.Checkbox,name:v(n,e),key:e},b[e]))))};q.propTypes={prefix:i.a.string.isRequired};const D=({prefix:e})=>{const{setFieldValue:t}=Object(s.useFormikContext)(),[a,n]=r.a.useState([]),l=r.a.useCallback(async()=>{const e=await(async()=>{return(await d.a.get(`${globals.rest.cert.templates}`,{headers:f})).data})();"success"===e.state&&n(e.result)},[]),i=r.a.useCallback(a=>{t(e,a.content,!1)},[e]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement(p.Dropdown,{alwaysClose:!0,header:"Load Template",type:"link",onOpen:l,className:"btn--dropdown"},r.a.createElement(p.DisplayIf,{condition:"loading"===a},r.a.createElement("a",null,r.a.createElement("span",{className:"icon-animation spin qtr-margin-right"}),"Loading...")),r.a.createElement(p.DisplayIf,{condition:Array.isArray(a)&&!a.length},r.a.createElement("a",null,"No templates")),r.a.createElement(p.DisplayIf,{condition:Array.isArray(a)&&a.length},a.map(e=>r.a.createElement("a",{key:e.id,onClick:()=>i(e)},e.friendly_name)))))};D.propTypes={prefix:i.a.string.isRequired};const T=({prefix:e})=>{const{values:t,setFieldValue:a}=Object(s.useFormikContext)();return r.a.useLayoutEffect(()=>{Object(s.getIn)(t,e)||a(e,y,!1)},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement(S,{prefix:e}),r.a.createElement(I,{prefix:e})),r.a.createElement("div",{className:"col"},r.a.createElement(R,{prefix:e}),r.a.createElement(p.Accordion,null,r.a.createElement(w,{prefix:e}),r.a.createElement(q,{prefix:e})))),r.a.createElement(D,{prefix:e}))};T.propTypes={prefix:i.a.string.isRequired},T.defaultProps={};t.default=T}}]);