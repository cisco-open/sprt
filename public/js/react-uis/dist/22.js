(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{545:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(544),s=t(30),o=t(4),m=t(2),i=t(1),c=t(11);function d(){return(d=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}const u=l.a.createContext([]),y=[{name:"delays",label:"Delays",y:"Delay (ms)",x:"Delay",avg:"Average delay",unit:"ms"},{name:"lengths",label:"Durations",y:"Duration (ms)",x:"Duration",avg:"Average duration",unit:"ms"},{name:"retransmits",label:"Retransmits",y:"Retransmits",x:"Retransmits",avg:"",unit:null}],g=({payload:e})=>l.a.createElement("div",{className:"toast toast--regular"},l.a.createElement("div",{className:"toast__body"},l.a.createElement("div",{className:"toast__message"},l.a.createElement("ul",{className:"list"},e.map(e=>l.a.createElement("li",{key:e.dataKey},l.a.createElement("span",{style:{color:e.color}},`${e.name}: `),`${e.value.toFixed(3)} ${e.unit}`)),e.length&&e[0].payload.name?l.a.createElement("li",null,l.a.createElement("span",null,"Time: "),s.DateTime.fromMillis(parseInt(1e3*parseFloat(e[0].payload.name),10)).toFormat("HH:mm:ss.SSS")):null)))),p=({x:e,y:a,payload:t})=>t.value?l.a.createElement("g",{transform:`translate(${e},${a})`},l.a.createElement("text",{x:0,y:0,dy:16,textAnchor:"end",fill:"#666",transform:"rotate(-35)"},s.DateTime.fromMillis(parseInt(1e3*parseFloat(t.value),10)).toFormat("HH:mm:ss.SSS"))):null,b=({data:e,job:a})=>{const[t,n]=l.a.useState(y[0]),s=l.a.useMemo(()=>{const a=Object(m.getIn)(e,"stats.lengths.new_style",[]);return a.length&&a[0].name?{tick:l.a.createElement(p,null),height:80}:{hide:!0}},[e]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(i.TabsHeader,{onTabChange:e=>n(y.find(a=>a.name===e)),openTab:t.name,bordered:!0,tabsClassName:"half-margin-bottom"},y.map(e=>l.a.createElement(i.Tab,{id:e.name,title:e.label,key:e.name},null))),l.a.createElement(u.Provider,{value:{data:Object(m.getIn)(e,`stats.${t.name}.new_style`,[])}},l.a.createElement(r.e,{width:"100%",height:500},l.a.createElement(r.d,{data:Object(m.getIn)(e,`stats.${t.name}.new_style`,[]),margin:{top:5,right:5,left:5,bottom:5}},l.a.createElement(r.a,{strokeDasharray:"3 3",vertical:!1}),l.a.createElement(r.g,d({dataKey:"name"},s)),l.a.createElement(r.h,{label:{value:t.y,angle:-90,position:"insideLeft"}}),l.a.createElement(r.f,{content:l.a.createElement(g,null)}),l.a.createElement(r.b,null),l.a.createElement(r.c,{type:"monotoneX",dataKey:"value",stroke:"#6cc04a",name:t.x,unit:t.unit,activeDot:{r:6,onClick:({payload:e})=>{window.open(`${globals.rest.sessions}?session_id=${e.id}&proto=${a.attributes_decoded.protocol}`)},style:{cursor:"pointer"}}}),void 0!==Object(m.getIn)(e,`stats.${t.name}.new_style.0.avg`,void 0)?l.a.createElement(r.c,{type:"monotoneX",dataKey:"avg",stroke:"#fbab18",name:t.avg,unit:t.unit}):null))))};a.default=({job:e,statsLoading:a})=>l.a.createElement(l.a.Fragment,null,l.a.createElement(o.b,{state:a},l.a.createElement(i.Spinner,{text:"Loading stats..."})),l.a.createElement(o.c,{state:a},e=>l.a.createElement(i.Alert,{type:"error",title:"Operation failed"},"Couldn't get jobs data: ",e.message,l.a.createElement(c.b,{error:e}))),l.a.createElement(o.a,{state:a},a=>l.a.createElement(b,{job:e,data:a})))}}]);