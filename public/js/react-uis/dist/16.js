(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{103:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(5),r=a.n(n),l=a(27);const s=async()=>{return(await r.a.get(`${globals.rest.generate}get-nad-ips/`,{params:{_:(new Date).getTime()},headers:l.a})).data}},11:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return l}));const n=e=>{var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style={position:"absolute",left:"-9999px"},document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},r=({error:e})=>e.hasOwnProperty("response")&&e.response.hasOwnProperty("data")&&e.response.data.hasOwnProperty("error")?React.createElement("div",null,"Details:",React.createElement("pre",null,e.response.data.error)):null,l=({delay:e,onDelay:t,children:a})=>(React.useEffect(()=>{const a=setTimeout(()=>t(),e);return()=>clearTimeout(a)},[]),a)},18:function(e,t,a){"use strict";a.d(t,"b",(function(){return E})),a.d(t,"a",(function(){return f}));var n=a(0),r=a.n(n),l=a(19),s=a(10),c=a.n(s),o=a(9),i=a(6);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const u=e=>c()({targets:e,opacity:Object(i.b)(!1),complete:()=>{Object(i.d)(e)},easing:i.c}),p=(e,t)=>e.addEventListener(i.a,t);t.c=e=>{let{endOpacity:t}=e,a=d(e,["endOpacity"]);return r.a.createElement(o.d,m({timeout:300,onEnter:e=>((e,t)=>c()({targets:e,opacity:Object(i.b)(!0,t),complete:()=>{Object(i.d)(e)},easing:i.c}))(e,t||1),onExit:u,addEndListener:p},a))};const E=e=>r.a.createElement(l.a,m({timeout:300,classNames:{appear:"show",appearActive:"show animated fastest fadeIn",appearDone:"show",enter:"show",enterActive:"show animated fastest fadeIn",enterDone:"show",exit:"show",exitActive:"show animated fastest fadeOut",exitDone:""},appear:!0,enter:!0,exit:!0},e)),f=e=>r.a.createElement(l.a,m({mountOnEnter:!0,unmountOnExit:!0,appear:!0,classNames:{appear:"animated fadeIn fastest",appearActive:"animated fadeIn fastest",appearDone:"animated",enter:"animated fadeIn fastest",enterActive:"animated fadeIn fastest",enterDone:"animated",exit:"fanimated fadeOut fastest",exitActive:"animated fadeOut fastest",exitDone:"hide"},timeout:300},e))},27:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}));const n={Accept:"application/json"},r={Accept:"application/json","Content-Type":"application/json"}},35:function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return o})),a.d(t,"e",(function(){return i})),a.d(t,"d",(function(){return m}));var n=a(5),r=a.n(n),l=a(27);const s=async({types:e})=>{return(await r.a.get(globals.rest.dictionaries.by_type+e.join(",")+"/columns/id,name,type/combine/type/",{params:{_:(new Date).getTime()},headers:l.a})).data},c=async({attribute:e})=>{return(await r.a.get(`${globals.rest.generate}get-attribute-data/${e}/`,{params:{_:(new Date).getTime()},headers:l.a})).data},o=async(e,t)=>(async({from:e})=>{var t={url:globals.rest.generate,method:"POST",headers:l.b};if(e.hasOwnProperty("link"))t.method="GET",e.nolocation?t.url=e.link:("/"==t.url[t.url.length-1]&&"/"==e.link[0]&&(t.url=t.url.slice(0,-1)),t.url+=e.link);else{var a={};a[e.call]=e.value,t.data=JSON.stringify(a)}return(await r()(t)).data})(t),i=async e=>{var t={headers:l.b};if(e.api){var a={[e.api.call]:e.api.parameters},n=window.location.pathname+"?ajax=1";t.url=n,t.data=JSON.stringify(a),t.method="POST"}else e.link&&(t.url=e.link,t.method="GET");return(await r()(t)).data},m=async e=>{return r()({url:e.link,method:e.method||"GET",data:e.request?JSON.stringify(e.request):void 0,headers:l.b}).data[e.result.attribute].map(t=>({value:t[e.result.fields.id],label:t[e.result.fields.name]}))};a(103)},383:function(e,t){},547:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(3),s=a.n(l),c=a(1),o=a(45);var i=()=>{const{paging:e,updPaging:t}=r.a.useContext(o.b),[a,n]=r.a.useState("object"==typeof e&&e.filter||""),l=()=>{(a.trim()||e.filter)&&t({filter:a.trim()},!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.Input,{type:"text",name:"filter",inline:"both",placeholder:"Filter",field:{onChange:e=>n(e.target.value),onKeyDown:e=>{13===e.keyCode&&l()},value:a,name:"filter"},form:{touched:{},errors:{}}}),r.a.createElement(c.ButtonGroup,{square:!0},r.a.createElement(c.Button.Link,{onClick:l,icon:!0},r.a.createElement(c.Icon,{icon:"filter"}))))},m=a(8),d=a(40);const u=e=>{if(Array.isArray(e))return r.a.createElement(r.a.Fragment,null,"Are you sure you want to delete ",r.a.createElement("span",{className:"text-bold"},e.length),` session${e.length>1?"s":""}?`);if("string"==typeof e){if(/^bulk:/.test(e))return r.a.createElement(r.a.Fragment,null,"Are you sure you want to delete all sessions of the bulk?");switch(e){case"dropped":return r.a.createElement(r.a.Fragment,null,"Are you sure you want to delete all dropped/failed sessions?");case"outdated":return r.a.createElement(r.a.Fragment,null,"Are you sure you want to delete all sessions which are older than 5 days?")}}return null};var p=()=>{const{sessions:e,selection:{selected:t,clear:a}}=r.a.useContext(o.b),{server:n,bulk:l}=Object(m.useParams)(),{reload:s}=r.a.useContext(o.b),[i,p]=r.a.useState(null);return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.Dropdown,{className:"btn--light",header:r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"icon-trash half-margin-right"}),r.a.createElement("span",{className:"btn--label"},"Remove")),alwaysClose:!0,openTo:"left"},r.a.createElement("a",{className:"panel",disabled:!e.filter(e=>t.includes(e.id)).length,onClick:()=>p(e.filter(e=>t.includes(e.id)).map(e=>e.id))},"Remove selected sessions"),r.a.createElement("a",{className:"panel",onClick:()=>p("dropped")},"Remove dropped/failed sessions"),r.a.createElement("a",{className:"panel",onClick:()=>p("outdated")},"Remove sessions older > 5 days"),r.a.createElement("a",{className:"panel",onClick:()=>p(`bulk:${l}`)},"Remove all sessions")),r.a.createElement(c.ConfirmationModal,{isOpen:Boolean(i),prompt:u(i),confirmType:"danger",confirmHandle:async()=>{try{const e=await Object(d.b)(n,l,i);switch(e.type){case"info":return e.message&&c.toast.info(void 0,e.message),p(null),!0;case"success":return e.message&&c.toast.success(void 0,e.message),a(),p(null),s(),!0;case"error":return e.message&&c.toast.error("Error",e.message,!1),!0;default:return!0}}catch(e){return c.toast.error("Error",e.message,!1),!0}},closeHandle:()=>p(null),confirmText:"Delete"}))};var E=r.a.createContext(),f=a(2),b=a(82),y=a.n(b),g=a(61);const h=s.a.oneOfType([s.a.arrayOf(s.a.shape({mac:s.a.string,ipAddr:s.a.string,sessid:s.a.string})),s.a.string]),v="update",O="drop";function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(a,!0).forEach((function(t){w(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function C(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const A=(e,t,a,n,r)=>{switch(r){case v:{const{"acct-session-time-type":t,"interim-session-time":a}=e;return k({},C(e,["acct-session-time-type","interim-session-time"]),{async:e.async?1:0,useAnotherServer:e.useAnotherServer?1:0,"interim-session-time":"specified"===t?a:t,sessions:Array.isArray(n)?1===n.length?n[0].toString():`array:${n.join(",")}`:"all"})}case O:{const{"drop-acct-session-time-type":t,"session-time":a}=e;return k({},C(e,["drop-acct-session-time-type","session-time"]),{async:e.async?1:0,useAnotherServer:e.useAnotherServer?1:0,"session-time":"specified"===t?a:t,sessions:Array.isArray(n)?1===n.length?n[0].toString():`array:${n.join(",")}`:"all"})}default:return e}};var S=()=>{const{api:e,token:t}=r.a.useContext(o.c),{toUpdate:a,action:n}=r.a.useContext(E),{server:l,bulk:s}=Object(m.useParams)(),{values:c}=Object(f.useFormikContext)(),i=r.a.useMemo(()=>{switch(n){case v:return`${window.location.origin}${globals.rest.sessions}server/${l}/bulk/${s}/update/`;case O:return`${window.location.origin}${globals.rest.sessions}server/${l}/bulk/${s}/drop/`;default:return""}},[n,s,l]);return e?r.a.createElement(g.b,{method:"patch",headers:g.a.ALL,auth:`Bearer ${t}`,data:A(c,0,0,a,n),url:i}):null},j=a(4),P=a(347),x=a(73),F=a(18),I=a(5),T=a.n(I),D=a(27);var M=a(103);const R=new P.Parser,_=["server.address","server.acctPort","server.secret","server.localAddr"],q=()=>{const[e,t]=r.a.useState(null);return Object(j.d)({promiseFn:M.a,onResolve:e=>{"object"==typeof e&&"success"===e.state&&e.ips&&(e.ips.IPv4.length||e.ips.IPv6.length)&&t(e.ips)}}).isFulfilled&&e?r.a.createElement(f.Field,{component:c.Select,name:"server.localAddr",id:"server.localAddr",title:"Source IP address"},Object.keys(e).sort().map(t=>r.a.createElement("optgroup",{label:t,key:t},e[t].map(({addr:e})=>r.a.createElement("option",{key:e,value:e},e))))):null},B=({value:{id:e,title:t}})=>{const{setFieldValue:a,validateForm:n}=Object(f.useFormikContext)(),l=r.a.useCallback(async()=>{try{const{server:{acct_port:t,address:r,attributes:{shared:l}}}=await(async e=>{return(await T.a.get(`${globals.rest.servers.server}${e}/`,{params:{_:(new Date).getTime()},headers:D.a})).data})(e);a("server.address",r,!1),a("server.acctPort",t,!1),a("server.secret",l,!1),n()}catch(e){console.error(e),Object(c.notification)("Error","Something went wrong")}},[e]);return r.a.createElement("li",null,r.a.createElement("a",{onClick:l},R.parse(t)))};B.propTypes={value:s.a.shape({id:s.a.string,title:s.a.string}).isRequired};const L=({in:e})=>r.a.createElement(F.a,{in:e},r.a.createElement(x.a,{title:"Load",openTo:"left",load_values:{nolocation:!0,link:`${globals.rest.servers.dropdown}?_=${(new Date).getTime()}`},onClick:()=>{},type:"link",renderElement:B,className:"btn--dropdown"}));L.propTypes={in:s.a.bool.isRequired};const $=()=>{const{values:e,setFieldValue:t,unregisterField:a,validateForm:n,setFieldTouched:l}=Object(f.useFormikContext)(),s=r.a.useMemo(()=>Object(f.getIn)(e,"useAnotherServer",!1),[e]);return r.a.useLayoutEffect(()=>{s?_.forEach(a=>{void 0===Object(f.getIn)(e,a,void 0)&&t(a,"server.acctPort"===a?1813:"",!1)}):(_.forEach(e=>{t(e,void 0,!1),l(e,!1,!1),a(e)}),n())},[s,e]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex separate"},r.a.createElement("div",{className:"flex-fluid"},r.a.createElement(f.Field,{name:"useAnotherServer",id:"useAnotherServer",component:c.Switch,right:"Send to different server"})),r.a.createElement(L,{in:s})),r.a.createElement(F.a,{in:s},r.a.createElement("div",{className:"separate"},r.a.createElement(f.Field,{name:"server.address",id:"server.address",component:c.Input,label:"Server address",validate:e=>e?void 0:"Server address is required"}),r.a.createElement(f.Field,{name:"server.acctPort",id:"server.acctPort",component:c.Input,type:"number",label:"Accounting port",min:1,max:65535,validate:e=>e?void 0:"Accounting port is required"}),r.a.createElement(f.Field,{name:"server.secret",id:"server.secret",component:c.Input,label:"Shared secret",validate:e=>e?void 0:"Shared secret is required"}),r.a.createElement(q,null))))};$.propTypes={};var U=$;function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function H(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const z=({selected:e})=>{const{values:t}=Object(f.useFormikContext)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.Field,{component:c.Select,name:"acct-status-type",id:"acct-status-type",title:"Acct-Status-Type"},r.a.createElement("option",{value:"1"},"Start"),r.a.createElement("option",{value:"3"},"Interim-Update"),r.a.createElement("option",{value:"7"},"Accounting-On"),r.a.createElement("option",{value:"8"},"Accounting-Off")),r.a.createElement(c.DisplayIf,{condition:Array.isArray(e)&&1===e.length},r.a.createElement(r.a.Fragment,null,r.a.createElement(f.Field,{name:"acct-session-id",id:"acct-session-id",component:c.Input,label:"Acct-Session-Id",readOnly:!0}),r.a.createElement(f.Field,{name:"calling-station-id",id:"calling-station-id",component:c.Input,label:"Calling-Station-Id",readOnly:!0}))),r.a.createElement(c.ConditionalWrapper,{condition:"specified"===Object(f.getIn)(t,"acct-session-time-type"),wrapper:r.a.createElement("div",{className:"row half-margin-top"})},r.a.createElement(c.ConditionalWrapper,{condition:"specified"===Object(f.getIn)(t,"acct-session-time-type"),wrapper:r.a.createElement("div",{className:"col"})},r.a.createElement(f.Field,{component:c.Select,name:"acct-session-time-type",id:"acct-session-time-type",title:"Acct-Session-Time"},r.a.createElement("option",{value:"timeFromCreate"},"Seconds since creation"),r.a.createElement("option",{value:"timeFromChange"},"Seconds since last change"),r.a.createElement("option",{value:"specified"},"Specified"))),r.a.createElement(c.DisplayIf,{condition:"specified"===Object(f.getIn)(t,"acct-session-time-type")},r.a.createElement("div",{className:"col"},r.a.createElement(f.Field,{name:"interim-session-time",id:"interim-session-time",component:c.Input,type:"number",label:"Seconds",min:0})))),r.a.createElement("div",{className:"row half-margin-top"},r.a.createElement("div",{className:"col"},r.a.createElement(f.Field,{name:"input-octets",id:"input-octets",component:c.Input,type:"number",label:"Acct-Input-Octets",min:0})),r.a.createElement("div",{className:"col"},r.a.createElement(f.Field,{name:"output-octets",id:"output-octets",component:c.Input,type:"number",label:"Acct-Output-Octets",min:0}))),r.a.createElement("div",{className:"row half-margin-top"},r.a.createElement("div",{className:"col"},r.a.createElement(f.Field,{name:"input-packets",id:"input-packets",component:c.Input,type:"number",label:"Acct-Input-Packets",min:0})),r.a.createElement("div",{className:"col"},r.a.createElement(f.Field,{name:"output-packets",id:"output-packets",component:c.Input,type:"number",label:"Acct-Output-Octets",min:0}))),r.a.createElement(c.DisplayIf,{condition:Array.isArray(e)&&1===e.length},r.a.createElement(f.Field,{name:"framed-ip-address",id:"framed-ip-address",component:c.Input,label:"Framed-IP-Address"})),r.a.createElement(f.Field,{name:"additional-attrs",id:"additional-attrs",component:c.Textarea,rows:5,label:"Additional attributes"}),r.a.createElement(f.Field,{name:"async",id:"async",component:c.Checkbox},"Multi-thread"))};z.propTypes={selected:h.isRequired};const J=[{name:"attributes",title:"Attributes",component:z},{name:"server",title:"Server",component:U},{name:"api",title:"API",component:S}],K=({selected:e})=>{const{api:t}=r.a.useContext(o.c);return r.a.createElement(c.Tabs,{vertical:!0,defaultTab:"attributes"},J.filter(e=>"api"!==e.name||"api"===e.name&&t).map(t=>r.a.createElement(c.Tab,{title:t.title||t.name,id:t.name,key:t.name},r.a.createElement(t.component,{selected:e}))))};K.propTypes={selected:h.isRequired};const W=({selected:e})=>{const{toUpdate:t}=r.a.useContext(E);return"string"==typeof t&&/bulk:.*/.test(t)?r.a.createElement("h2",{className:"modal__title"},"Update all sessions"):e?1===e.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"modal__title"},"Update the session"),r.a.createElement("div",{className:"subheader"},"MAC: ",r.a.createElement("span",{className:"text-normal"},e[0].mac))):r.a.createElement("h2",{className:"modal__title"},"Update ",e.length," sessions"):r.a.createElement("h2",{className:"modal__title"},"No sessions selected")};W.propTypes={selected:h.isRequired};const V={initials:e=>(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(a,!0).forEach((function(t){H(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e})({"acct-status-type":"3","acct-session-time-type":"timeFromCreate","interim-session-time":0,"input-octets":0,"output-octets":0,"input-packets":0,"output-packets":0,"additional-attrs":"",async:!0},Array.isArray(e)&&1===e.length?{"acct-session-id":e[0].sessid,"calling-station-id":e[0].mac,"framed-ip-address":e[0].ipAddr||""}:{}),submitAction:d.k,body:K,header:W,actionButton:r.a.createElement(c.Button,{color:"primary",onClick:()=>{}},"Update")};function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function X(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Q=({selected:e})=>{const{values:t}=Object(f.useFormikContext)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.DisplayIf,{condition:Array.isArray(e)&&1===e.length},r.a.createElement(r.a.Fragment,null,r.a.createElement(f.Field,{name:"acct-session-id",id:"acct-session-id",component:c.Input,label:"Acct-Session-Id",readOnly:!0}),r.a.createElement(f.Field,{name:"calling-station-id",id:"calling-station-id",component:c.Input,label:"Calling-Station-Id",readOnly:!0}))),r.a.createElement(f.Field,{component:c.Select,name:"terminate-cause",id:"terminate-cause",title:"Acct-Terminate-Cause"},r.a.createElement("option",{value:"1"},"User Request"),r.a.createElement("option",{value:"2"},"Lost Carrier"),r.a.createElement("option",{value:"3"},"Lost Service"),r.a.createElement("option",{value:"4"},"Idle Timeout"),r.a.createElement("option",{value:"5"},"Session Timeout"),r.a.createElement("option",{value:"6"},"Admin Reset"),r.a.createElement("option",{value:"7"},"Admin Reboot"),r.a.createElement("option",{value:"8"},"Port Error"),r.a.createElement("option",{value:"9"},"NAS Error"),r.a.createElement("option",{value:"10"},"NAS Request"),r.a.createElement("option",{value:"11"},"NAS Reboot"),r.a.createElement("option",{value:"12"},"Port Unneeded"),r.a.createElement("option",{value:"13"},"Port Preempted"),r.a.createElement("option",{value:"14"},"Port Suspended"),r.a.createElement("option",{value:"15"},"Service Unavailable"),r.a.createElement("option",{value:"16"},"Callback"),r.a.createElement("option",{value:"17"},"User Error"),r.a.createElement("option",{value:"18"},"Host Request")),r.a.createElement(c.ConditionalWrapper,{condition:"specified"===Object(f.getIn)(t,"drop-acct-session-time-type"),wrapper:r.a.createElement("div",{className:"row half-margin-top"})},r.a.createElement(c.ConditionalWrapper,{condition:"specified"===Object(f.getIn)(t,"drop-acct-session-time-type"),wrapper:r.a.createElement("div",{className:"col"})},r.a.createElement(f.Field,{component:c.Select,name:"drop-acct-session-time-type",id:"drop-acct-session-time-type",title:"Acct-Session-Time"},r.a.createElement("option",{value:"timeFromCreate"},"Seconds since creation"),r.a.createElement("option",{value:"timeFromChange"},"Seconds since last change"),r.a.createElement("option",{value:"specified"},"Specified"))),r.a.createElement(c.DisplayIf,{condition:"specified"===Object(f.getIn)(t,"drop-acct-session-time-type")},r.a.createElement("div",{className:"col"},r.a.createElement(f.Field,{name:"session-time",id:"session-time",component:c.Input,type:"number",label:"Seconds",min:0})))),r.a.createElement(f.Field,{name:"delay-time",id:"delay-time",component:c.Input,type:"number",label:"Acct-Delay-Time",min:0}),r.a.createElement(c.DisplayIf,{condition:Array.isArray(e)&&1===e.length},r.a.createElement(f.Field,{name:"framed-ip-address",id:"framed-ip-address",component:c.Input,label:"Framed-IP-Address"})),r.a.createElement(f.Field,{name:"keep-session",id:"keep-session",component:c.Checkbox},"Keep sessions in DB"),r.a.createElement(f.Field,{name:"async",id:"async",component:c.Checkbox},"Multi-thread"))};Q.propTypes={selected:h.isRequired};const Z=[{name:"attributes",title:"Attributes",component:Q},{name:"server",title:"Server",component:U},{name:"api",title:"API",component:S}],ee=({selected:e})=>{const{api:t}=r.a.useContext(o.c);return r.a.createElement(c.Tabs,{vertical:!0,defaultTab:"attributes"},Z.filter(e=>"api"!==e.name||"api"===e.name&&t).map(t=>r.a.createElement(c.Tab,{title:t.title||t.name,id:t.name,key:t.name},r.a.createElement(t.component,{selected:e}))))};ee.propTypes={selected:h.isRequired};const te=({selected:e})=>{const{toUpdate:t}=r.a.useContext(E);return"string"==typeof t&&/bulk:.*/.test(t)?r.a.createElement("h2",{className:"modal__title"},"Drop all sessions"):e?1===e.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"modal__title"},"Drop the session"),r.a.createElement("div",{className:"subheader"},"MAC: ",r.a.createElement("span",{className:"text-normal"},e[0].mac))):r.a.createElement("h2",{className:"modal__title"},"Drop ",e.length," sessions"):r.a.createElement("h2",{className:"modal__title"},"No sessions selected")};te.propTypes={selected:h.isRequired};const ae={initials:e=>(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(a,!0).forEach((function(t){X(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e})({"terminate-cause":"6","drop-acct-session-time-type":"timeFromCreate","session-time":0,"delay-time":0,"keep-session":!1,async:!0},Array.isArray(e)&&1===e.length?{"acct-session-id":e[0].sessid,"calling-station-id":e[0].mac,"framed-ip-address":e[0].ipAddr||""}:{}),submitAction:d.c,body:ee,header:te,actionButton:r.a.createElement(c.Button,{color:"danger",onClick:()=>{}},"Drop")};var ne=()=>{const{server:e,bulk:t}=Object(m.useParams)(),{toUpdate:a,closeModal:n,action:l}=r.a.useContext(E),{api:s}=r.a.useContext(o.c),{sessions:i,block:{blockSession:d,blockAllSession:u,unblockSession:p,unblockAllSession:b},selection:{clear:g}}=r.a.useContext(o.b),h=r.a.useMemo(()=>Array.isArray(a)&&a.length?i.filter(({id:e})=>a.includes(e)).reduce((e,{mac:t,ipAddr:a,sessid:n})=>[...e,{mac:t,ipAddr:a,sessid:n}],[]):null,[i,a]),N=r.a.useMemo(()=>(e=>{return{[v]:V,[O]:ae}[e]||null})(l),[l]);return r.a.createElement(c.Modal,{closeIcon:!0,closeHandle:n,size:s?"large":"default",isOpen:Boolean(a)},r.a.createElement(c.ModalHeader,null,N?r.a.createElement(N.header,{selected:h}):null),r.a.createElement(f.Formik,{initialValues:N?N.initials(h):{},onSubmit:async r=>{try{g(),Array.isArray(a)?d(...a):u(),N&&await N.submitAction(e,t,A(r,0,0,a,l)),n()}catch(e){Array.isArray(a)?p(...a):b(),c.toast.error("Error",e.message,!1)}},validate:e=>{const t={};if("object"==typeof e.server){const{address:a,localAddr:n}=e.server;y()(a)&&n&&y.a.version(a)!==y.a.version(n)&&(t.server={localAddr:"Address of the server and source IP should be of same family"})}return t}},({submitForm:e,isSubmitting:t,isValid:a})=>r.a.createElement(r.a.Fragment,null,r.a.createElement(c.ModalBody,{className:"text-left"},N?r.a.createElement(N.body,{selected:h}):null),r.a.createElement(c.ModalFooter,null,r.a.createElement(c.Button.Light,{onClick:n},"Close"),N?r.a.cloneElement(N.actionButton,{onClick:e,disabled:t||!a},r.a.createElement(r.a.Fragment,null,N.actionButton.props.children,r.a.createElement(c.DisplayIf,{condition:t},r.a.createElement("span",{className:"qtr-margin-left icon-animation spin"})))):null))))};const re=({sessions:e,selected:t,setModal:a,bulk:n})=>r.a.createElement(c.Dropdown,{className:"btn--light",header:r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"icon-blocked half-margin-right"}),r.a.createElement("span",{className:"btn--label"},"Drop")),alwaysClose:!0},r.a.createElement("a",{className:"panel",disabled:!e.filter(e=>t.includes(e.id)).length,onClick:()=>a(e.filter(e=>t.includes(e.id)).map(e=>e.id))},"Drop selected sessions"),r.a.createElement("a",{className:"panel",onClick:()=>a(`bulk:${n}`)},"Drop all sessions"));re.propTypes={sessions:s.a.arrayOf(s.a.any).isRequired,selected:s.a.arrayOf(s.a.any).isRequired,setModal:s.a.func.isRequired,bulk:s.a.string.isRequired};const le=({sessions:e,selected:t,setModal:a,bulk:n})=>r.a.createElement(c.Dropdown,{className:"btn--light",header:r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"icon-refresh half-margin-right"}),r.a.createElement("span",{className:"btn--label"},"Accounting")),alwaysClose:!0},r.a.createElement("a",{className:"panel",disabled:!e.filter(e=>t.includes(e.id)).length,onClick:()=>a(e.filter(e=>t.includes(e.id)).map(e=>e.id))},"Send Interim-Update on selected sessions"),r.a.createElement("a",{className:"panel",onClick:()=>a(`bulk:${n}`)},"Send Interim-Update on all sessions"));le.propTypes={sessions:s.a.arrayOf(s.a.any).isRequired,selected:s.a.arrayOf(s.a.any).isRequired,setModal:s.a.func.isRequired,bulk:s.a.string.isRequired};const se={what:null,action:null};var ce=()=>{const{sessions:e,selection:{selected:t}}=r.a.useContext(o.b),{bulk:a}=Object(m.useParams)(),[n,l]=r.a.useState(se);return r.a.createElement(r.a.Fragment,null,r.a.createElement(le,{sessions:e,selected:t,setModal:e=>l({what:e,action:v}),bulk:a}),r.a.createElement(re,{sessions:e,selected:t,setModal:e=>l({what:e,action:O}),bulk:a}),r.a.createElement(E.Provider,{value:{toUpdate:n.what,action:n.action,closeModal:()=>l(se)}},r.a.createElement(ne,null)))};const oe=({modal:e,closeModal:t})=>r.a.createElement(c.Modal,{closeIcon:!0,closeHandle:t,size:"large",isOpen:Boolean(e),title:"Guest credentials"},r.a.createElement(c.ModalBody,{className:"text-left"},r.a.createElement(c.Textarea,{readOnly:!0,rows:30,field:{name:"credentials",onChange:()=>{},value:e?e.map(e=>e.join(":")).join("\n"):""},form:{touched:{},errors:{}}})),r.a.createElement(c.ModalFooter,null,r.a.createElement(c.Button.Light,{onClick:t},"OK")));oe.propTypes={modal:s.a.arrayOf(s.a.any).isRequired,closeModal:s.a.func.isRequired};var ie=()=>{const{sessions:e,selection:{selected:t}}=r.a.useContext(o.b),{server:a,bulk:n}=Object(m.useParams)(),[l,s]=r.a.useState(null),i=Object(j.d)({deferFn:d.f,server:a,bulk:n,onReject:e=>{c.toast.error("Error","Couldn't get data from server",!1),console.log(e)},onResolve:e=>{Array.isArray(e)&&e.length?s(e):c.toast.info("No data","No data found")}});return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.Dropdown,{className:"btn--light",header:r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:`${i.isPending?"icon-animation spin":"icon-export"} half-margin-right`}),r.a.createElement("span",{className:"btn--label"},"Guest")),alwaysClose:!0,divClassName:i.isPending?"disabled":""},r.a.createElement("a",{className:"panel",disabled:!e.filter(e=>t.includes(e.id)).length,onClick:()=>{i.run(e.filter(e=>t.includes(e.id)).map(e=>e.id))}},"Export guest credentials of selected sessions"),r.a.createElement("a",{className:"panel",onClick:()=>{i.run("all")}},"Export guest credentials of all sessions")),r.a.createElement(oe,{modal:l,closeModal:()=>s(null)}))};function me(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function de(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ue=()=>{const{removeSessions:e,updateSessions:t,block:{blocked:a}}=r.a.useContext(o.b),{server:n,bulk:l}=Object(m.useParams)(),[s,i]=r.a.useState(null),u=r.a.useCallback(()=>{if(!Array.isArray(a)||!a.length)return void i(null);(async()=>{try{const r=await Object(d.a)(n,l,{"check-session":`array:${a.join(",")}`}),s=Object.keys(r).map(e=>parseInt(e,10)||null).filter(e=>e),o=a.filter(e=>!s.includes(e));o.length&&(e(...o),c.toast.info("",`${o.length} session${o.length>1?"s":""} removed`));const m=s.filter(e=>!Object(f.getIn)(r[e],"attributes.job-chunk"));m.length&&(t(m.reduce((e,t)=>(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?me(a,!0).forEach((function(t){de(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):me(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e})({},e,{[t]:r[t]}),{})),c.toast.info("",`${m.length} session${m.length>1?"s":""} updated`)),i(setTimeout(u,1e3))}catch(e){c.toast.error("Error",e.message,!1),i(null)}})()},[a,l,n]);return r.a.useEffect(()=>()=>{s&&clearTimeout(s),i(null)},[]),r.a.useEffect(()=>{Array.isArray(a)&&a.length&&i(e=>e||setTimeout(u,1e3))},[a]),null};ue.propTypes={},ue.defaultProps={};var pe=ue,Ee=a(42);const fe={getEndpointByMac:"Get policies applied to EndPoint",applyEndpointByIp:"Apply policy by IP",applyEndpointByMac:"Apply policy by MAC",clearEndpointByIp:"Clear policies by IP",clearEndpointByMac:"Clear policies by MAC"},be=Object(Ee.a)(()=>a.e(23).then(a.bind(null,548)),{fallback:r.a.createElement("div",{className:"flex-center"},r.a.createElement(c.Spinner,null))}),ye=({closeModal:e,api:t})=>{const{sessions:a,selection:{selected:n}}=r.a.useContext(o.b);return r.a.createElement(c.Modal,{closeIcon:!0,closeHandle:e,size:"large",isOpen:Boolean(t),title:fe[t]||"ANC Operation"},r.a.createElement(c.ModalBody,{className:"text-left"},r.a.createElement(be,{api:t,session:a.find(e=>e.id===n[0])})),r.a.createElement(c.ModalFooter,null,r.a.createElement(c.Button.Light,{onClick:e},"Close")))};ye.propTypes={api:s.a.string.isRequired,closeModal:s.a.func.isRequired};var ge=()=>{const{sessions:e,selection:{selected:t}}=r.a.useContext(o.b),[a,n]=r.a.useState(null);return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.Dropdown,{className:"btn--light",header:r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"icon-data-usage half-margin-right"}),r.a.createElement("span",{className:"btn--label"},"ANC")),alwaysClose:!0,divClassName:1!==e.filter(e=>t.includes(e.id)).length?"disabled":""},r.a.createElement("a",{className:"panel",onClick:()=>n("getEndpointByMac")},"Get policies applied to EndPoint"),r.a.createElement(c.Dropdown.Divider,null),r.a.createElement("a",{className:"panel",onClick:()=>n("applyEndpointByIp")},"Apply policy by IP"),r.a.createElement("a",{className:"panel",onClick:()=>n("applyEndpointByMac")},"Apply policy by MAC"),r.a.createElement(c.Dropdown.Divider,null),r.a.createElement("a",{className:"panel",onClick:()=>n("clearEndpointByIp")},"Clear policies by IP"),r.a.createElement("a",{className:"panel",onClick:()=>n("clearEndpointByMac")},"Clear policies by MAC")),r.a.createElement(ye,{api:a,closeModal:()=>n(null)}))};const he=()=>r.a.createElement("div",{className:"panel position-sticky actions no-padding-left no-padding-right"},r.a.createElement("div",{className:"flex-center-vertical"},r.a.createElement(c.ButtonGroup,{square:!0},r.a.createElement(ce,null)),r.a.createElement("div",{className:"divider"}),r.a.createElement(c.ButtonGroup,{square:!0},r.a.createElement(ie,null),r.a.createElement(ge,null)),r.a.createElement("div",{className:"divider"}),r.a.createElement(i,null),r.a.createElement("div",{className:"divider"}),r.a.createElement(c.ButtonGroup,{square:!0},r.a.createElement(p,null))),r.a.createElement(pe,null)),ve=()=>{const{paging:e,updPaging:t}=r.a.useContext(o.b);return e&&Object.keys(e).length&&e.total?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pull-right"},"Per page:Â ",r.a.createElement("ul",{className:"pagination pagination--small"},[10,25,50,100,500,1e3].map(a=>r.a.createElement("li",{key:a,className:e.limit===a?"active":""},r.a.createElement("a",{onClick:()=>t({limit:a})},a))))),r.a.createElement("div",{className:"flex-center-vertical"},r.a.createElement("span",{className:"qtr-margin-right base-margin-top"},"Page:"),r.a.createElement(c.Pagination,{size:"small",icons:!0,position:e.offset,total:e.total,perPage:e.limit,onPageChange:(e,a)=>t({offset:a}),firstAndLast:!1,beginAt:0}))):null},Oe={ACCOUNTING_STARTED:r.a.createElement("span",{className:"text-info",title:"Accounting started"},r.a.createElement("span",{className:"icon-info"})),ACCEPTED:r.a.createElement("span",{className:"text-success",title:"ACCESS_ACCEPT received"},r.a.createElement("span",{className:"icon-check-square"})),REJECTED:r.a.createElement("span",{className:"text-danger",title:"ACCESS_REJECT received"},r.a.createElement("span",{className:"icon-error"})),DROPPED:r.a.createElement("span",{className:"text-warning",title:"Session was dropped"},r.a.createElement("span",{className:"icon-exclamation-triangle"})),GUEST_SUCCESS:r.a.createElement("span",{className:"text-success",title:"Guest authentication was successful"},r.a.createElement("span",{className:"icon-contact"})),GUEST_FAILURE:r.a.createElement("span",{className:"text-danger",title:"Guest authentication failed"},r.a.createElement("span",{className:"icon-contact"})),GUEST_REGISTERED:r.a.createElement("span",{className:"text-info",title:"Guest user registered"},r.a.createElement("span",{className:"icon-add-contact"})),default:r.a.createElement("span",{title:"Unknown"},r.a.createElement("span",{className:"icon-question-circle"}))},Ne=({session:{attributes:{StatesHistory:e,State:t}}})=>{const a=r.a.useMemo(()=>e?e.slice(-1).pop().code:t,[e,t]);return Oe[a]||Oe.default};Ne.propTypes={session:s.a.shape({attributes:s.a.shape({StatesHistory:s.a.array,State:s.a.string})}).isRequired};const ke=({id:e})=>{const{selection:{selected:t,select:a,deselect:n},block:{blocked:l}}=r.a.useContext(o.b);return l.includes(e)?r.a.createElement("div",{className:"text-center"},r.a.createElement("span",{className:"icon-animation spin","aria-hidden":!0,title:"Session is blocked due to some job."})):r.a.createElement(c.Checkbox,{field:{onChange:()=>t.includes(e)?n(e):a(e),name:`radius-${e}`},form:{touched:{},error:{},values:{[`radius-${e}`]:t.includes(e)}}})};ke.propTypes={id:s.a.oneOfType([s.a.number,s.a.string]).isRequired};const we=e=>"DESC"===e?"ASC":"DESC",Ce=[{name:"mac",title:"MAC"},{name:"user",title:"User"},{name:"sessid",title:"Session ID"},{name:"ipAddr",title:"IP Address"},{name:"started",title:"Session started"},{name:"changed",title:"Last update"}],Ae=()=>r.a.createElement(o.b.Consumer,null,({sessions:e,paging:t,updPaging:a,selection:{selected:n,selectAll:l,deselectAll:s}})=>r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(c.Checkbox,{field:{onChange:e=>e.target.checked?l():s(),name:"radius-all"},form:{touched:{},error:{},values:{"radius-all":!e.filter(e=>!n.includes(e.id)).length}}})),r.a.createElement("th",null,"Details"),r.a.createElement("th",null,"State"),Ce.map(e=>r.a.createElement("th",{className:`sortable${t.column===e.name?" sorted":""}`,key:e.name,onClick:()=>a({column:e.name,order:t.column===e.name?we(t.order):"DESC"})},e.title,t.column===e.name?r.a.createElement("span",{className:`sort-indicator icon-sort-amount-${t.order.toLowerCase()}`}):null)))));var Se=({session:{id:e}})=>{const{url:t}=Object(m.useRouteMatch)(),a=Object(m.useHistory)();return r.a.createElement("a",{onClick:()=>a.push(`${t}session-flow/${e}/`),className:"qtr-margin-right"},r.a.createElement("span",{className:"icon-diagnostics",title:"Session flow (packets)"}))},je=a(66),Pe=a(11);const xe=({dacl:e})=>e&&Array.isArray(e)&&e.length?r.a.createElement("pre",{className:"numbered"},r.a.createElement("span",{className:"line-number text-muted text-monospace"},e.map((e,t)=>r.a.createElement("span",{key:t},t))),r.a.createElement("code",{className:"text-monospace"},e.map(e=>`${e}\n`))):r.a.createElement(c.Alert.Info,null,"dACL is empty."),Fe=()=>{const[e,t]=r.a.useState(null),[a,n]=r.a.useState({}),[l,s]=r.a.useState(!1),o=Object(j.d)({deferFn:d.i,defer:!0});r.a.useEffect(()=>{je.a.on("session.show.dacl",(e,a,r,l)=>{t({server:e,bulk:a,id:r}),n(l)})},[]),r.a.useEffect(()=>{e&&s(!0)},[e]),r.a.useEffect(()=>{l&&o.run(e)},[l]);const i=()=>s(!1);return e?r.a.createElement(c.Modal,{closeIcon:!0,closeHandle:i,size:"large",isOpen:l},r.a.createElement(c.ModalHeader,null,r.a.createElement("h2",{className:"modal__title"},"Session dACL"),o.isFulfilled?r.a.createElement("div",{className:"subheader"},"Endpoint: ",r.a.createElement("span",{className:"text-normal"},a.mac)):null),r.a.createElement(c.ModalBody,{className:o.isPending?"":"text-left"},r.a.createElement(j.b,{state:o},r.a.createElement(c.Spinner,null)),r.a.createElement(j.c,{state:o},e=>r.a.createElement(c.Alert,{type:"error",title:"Operation failed"},"Couldn't get flow: ",e.message,r.a.createElement(Pe.b,{error:e}))),r.a.createElement(j.a,{state:o},({dacl:e})=>r.a.createElement(xe,{dacl:e}))),r.a.createElement(c.ModalFooter,null,r.a.createElement(c.Button.Light,{onClick:i},"OK"))):null};var Ie=({session:{attributes:e,id:t,mac:a}})=>{const{server:n,bulk:l}=Object(m.useParams)();return Array.isArray(e.DACL)&&e.DACL.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{onClick:()=>je.a.emit("session.show.dacl",n,l,t,{mac:a}),className:"qtr-margin-right"},r.a.createElement("span",{className:"icon-lock",title:"Show DACL"}))):null};const Te=Object(Ee.a)(()=>a.e(19).then(a.bind(null,546)),{fallback:r.a.createElement(c.Spinner,null)}),De=()=>{const[e,t]=r.a.useState(null),[a,n]=r.a.useState(!1),l=Object(j.d)({deferFn:d.e,defer:!0});r.a.useEffect(()=>{je.a.on("session.show.cert",e=>t({certificate:e,type:"identity"}))},[]),r.a.useEffect(()=>{e&&n(!0)},[e]),r.a.useEffect(()=>{a&&l.run(e)},[a]);const s=()=>n(!1);return e?r.a.createElement(c.Modal,{closeIcon:!0,closeHandle:s,size:"large",isOpen:a},r.a.createElement(c.ModalHeader,null,r.a.createElement("h2",{className:"modal__title"},"Certificate details")),r.a.createElement(c.ModalBody,{className:l.isPending?"":"text-left"},r.a.createElement(j.b,{state:l},r.a.createElement(c.Spinner,null)),r.a.createElement(j.c,{state:l},e=>r.a.createElement(c.Alert,{type:"error",title:"Operation failed"},"Couldn't get flow: ",e.message,r.a.createElement(Pe.b,{error:e}))),r.a.createElement(j.a,{state:l},({result:e})=>r.a.createElement(Te,{chain:e}))),r.a.createElement(c.ModalFooter,null,r.a.createElement(c.Button.Light,{onClick:s},"OK"))):null},Me=({session:{attributes:e}})=>e.certificate?r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{onClick:()=>je.a.emit("session.show.cert",e.certificate),className:"qtr-margin-right"},r.a.createElement("span",{className:"icon-certified",title:"Show certificate"}))):null;Me.propTypes={session:s.a.shape({attributes:s.a.any}).isRequired};var Re=Me;const _e=["FIRST_NAME","COMPANY","EMAIL_ADDRESS","LAST_NAME","PERSON_VISITED","PHONE_NUMBER","REASON_VISIT","USER_AGENT","USER_NAME","CREDENTIALS"].sort(),qe=({data:e})=>e?r.a.createElement("dl",{className:"dl--inline-wrap dl--inline-centered"},_e.map(t=>t in e?"CREDENTIALS"===t?r.a.createElement(r.a.Fragment,{key:t},r.a.createElement("dt",{className:"text-capitalize"},"Login"),r.a.createElement("dd",null,e.CREDENTIALS[0]),r.a.createElement("dt",{className:"text-capitalize"},"Password"),r.a.createElement("dd",null,e.CREDENTIALS[1])):r.a.createElement(r.a.Fragment,{key:t},r.a.createElement("dt",{className:"text-capitalize"},t.replace("_"," ").toLowerCase()),r.a.createElement("dd",null,e[t]||"&nbsp;")):null).filter(e=>Boolean(e))):r.a.createElement(c.Alert.Info,null,"No guest data."),Be=()=>{const[e,t]=r.a.useState(null),[a,n]=r.a.useState(!1);r.a.useEffect(()=>{je.a.on("session.show.guest",e=>{t(e)})},[]),r.a.useEffect(()=>{e&&n(!0)},[e]);const l=()=>n(!1);return e?r.a.createElement(c.Modal,{closeIcon:!0,closeHandle:l,size:"large",isOpen:a,title:"Guest data"},r.a.createElement(c.ModalBody,{className:"text-left"},r.a.createElement(qe,{data:e})),r.a.createElement(c.ModalFooter,null,r.a.createElement(c.Button.Light,{onClick:l},"OK"))):null};function Le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function $e(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ue=({session:{attributes:e}})=>e.snapshot&&"object"==typeof e.snapshot.GUEST_FLOW?r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{onClick:()=>je.a.emit("session.show.guest",function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Le(a,!0).forEach((function(t){$e(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Le(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.snapshot.GUEST_FLOW)),className:"qtr-margin-right"},r.a.createElement("span",{className:"icon-contact",title:"Show guest data"}))):null;const Ge=({session:e})=>r.a.createElement(r.a.Fragment,null,r.a.createElement(Se,{session:e}),r.a.createElement(Ie,{session:e}),r.a.createElement(Re,{session:e}),r.a.createElement(Ue,{session:e})),He=Object(Ee.a)(()=>a.e(21).then(a.bind(null,549)),{fallback:r.a.createElement(c.Spinner,null)}),ze=()=>{const e=Object(j.d)({deferFn:d.j,defer:!0}),{server:t,bulk:a}=Object(m.useParams)(),{path:n,url:l}=Object(m.useRouteMatch)(),s=Object(m.useRouteMatch)({path:`${n}session-flow/:id(\\d+)/`,strict:!0}),o=Object(m.useHistory)(),i=r.a.useMemo(()=>s?s.params.id:null,[s]);r.a.useEffect(()=>{i&&e.run({server:t,bulk:a,id:i})},[i,t,a]);const u=()=>o.push(l);return r.a.createElement(c.Modal,{closeIcon:!0,closeHandle:u,size:"full",isOpen:Boolean(s)},r.a.createElement(c.ModalHeader,null,r.a.createElement("h2",{className:"modal__title"},"Session flow"),e.isFulfilled&&Object(f.getIn)(e.data,"session.mac")?r.a.createElement("div",{className:"subheader"},"Endpoint: ",r.a.createElement("span",{className:"text-normal"},e.data.session.mac)):null),r.a.createElement(c.ModalBody,{className:e.isPending?"":"text-left"},r.a.createElement(j.b,{state:e},r.a.createElement(c.Spinner,null)),r.a.createElement(j.c,{state:e},e=>r.a.createElement(c.Alert,{type:"error",title:"Operation failed"},"Couldn't get flow: ",e.message,r.a.createElement(Pe.b,{error:e}))),r.a.createElement(j.a,{state:e},({session:e})=>r.a.createElement(He,{session:e}))),r.a.createElement(c.ModalFooter,null,r.a.createElement(c.Button.Light,{onClick:u},"OK")))},Je=()=>r.a.createElement("div",null,"No sessions"),Ke=({tableRef:e})=>{const{sessions:t}=r.a.useContext(o.b);return t.length?r.a.createElement("div",{className:"responsive-table base-margin-top dbl-margin-bottom"},r.a.createElement("table",{className:"table table--compressed table--bordered table--highlight table--nostripes table--wrap table--sortable",ref:e},r.a.createElement(Ae,null),r.a.createElement("tbody",null,t.map(e=>r.a.createElement("tr",{key:e.id},r.a.createElement("td",{className:"checkbox-only"},r.a.createElement(ke,{id:e.id})),r.a.createElement("td",{className:"text-center",style:{whiteSpace:"nowrap"}},r.a.createElement(Ge,{session:e})),r.a.createElement("td",{className:"state text-center"},r.a.createElement(Ne,{session:e})),r.a.createElement("td",null,e.mac),r.a.createElement("td",null,e.user),r.a.createElement("td",null,e.sessid),r.a.createElement("td",null,e.ipAddr),r.a.createElement("td",null,e.started_f),r.a.createElement("td",null,e.changed_f))))),r.a.createElement(ve,null),r.a.createElement(ze,null),r.a.createElement(Fe,null),r.a.createElement(De,null),r.a.createElement(Be,null)):r.a.createElement(Je,null)};Ke.propTypes={tableRef:s.a.oneOfType([s.a.func,s.a.shape({current:s.a.any})]).isRequired};const We=({what:e,active:t})=>t?e.current?r.a.createElement("div",{className:"load-overlay flex flex-center",style:{width:e.current.offsetWidth,height:e.current.offsetHeight,top:e.current.offsetTop,left:e.current.offsetLeft}},r.a.createElement(c.Spinner,null)):r.a.createElement(c.Spinner,null):null;We.propTypes={what:s.a.shape({current:s.a.any}).isRequired,active:s.a.bool},We.defaultProps={active:!1};const Ve=({loadingState:{status:e,isPending:t},bulkLoaded:a})=>{r.a.useEffect(()=>{"fulfilled"===e&&a()},[e]);const n=r.a.useRef(null);return r.a.createElement("div",{className:"tab-pane active"},r.a.createElement(he,{loading:t}),r.a.createElement(Ke,{loading:t,tableRef:n}),r.a.createElement(We,{what:n,active:t}))};Ve.propTypes={loadingState:s.a.shape({status:s.a.string,isPending:s.a.bool}).isRequired,bulkLoaded:s.a.func.isRequired},Ve.defaultProps={};t.default=Ve},6:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"d",(function(){return r})),a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return s}));const n="animation::done",r=e=>e.dispatchEvent(new Event(n)),l=(e,t=1)=>({value:e?[0,t]:0,easing:"linear",duration:300}),s="spring(1, 150, 10)"},61:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(0),r=a.n(n),l=a(3),s=a.n(l),c=a(1);const o={ACCEPT_ONLY:{Accept:"application/json"},ALL:{Accept:"application/json","Content-Type":"application/json"}},i=({method:e,headers:t,auth:a,data:n,url:l})=>{const s=[`curl -X ${e.toUpperCase()}`];return Object.keys(t).sort().forEach(e=>s.push(`-H "${e}: ${t[e]}"`)),a&&s.push(`-H "Authorization: ${a}"`),n&&s.push(`-d '${JSON.stringify(n)}'`),s.push(l),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-2"},r.a.createElement("div",null,"Method:"),r.a.createElement(c.Panel,{bordered:!0},e.toUpperCase())),r.a.createElement("div",{className:"col-10"},r.a.createElement("div",null,"URL:"),r.a.createElement(c.Panel,{bordered:!0},l))),r.a.createElement("div",{className:"half-margin-top"},r.a.createElement("div",null,"Headers:"),r.a.createElement(c.Panel,{bordered:!0},r.a.createElement("pre",{style:{wordBreak:"break-word"},className:"text-small"},r.a.createElement("code",null,Object.keys(t).sort().map(e=>`${e}: ${t[e]}`).join("\n"),a?`\nAuthorization: ${a}`:null)))),n?r.a.createElement("div",{className:"half-margin-top"},r.a.createElement("div",null,"Data:"),r.a.createElement(c.Panel,{bordered:!0},r.a.createElement("pre",{style:{wordBreak:"break-word"},className:"text-small"},r.a.createElement("code",null,JSON.stringify(n))))):null,r.a.createElement("div",{className:"half-margin-top"},r.a.createElement("div",null,"cURL example:"),r.a.createElement(c.Panel,{bordered:!0},r.a.createElement("pre",{style:{wordBreak:"break-word"},className:"text-small"},r.a.createElement("code",null,s.join(" \\\n    "))))))};i.propTypes={method:s.a.string,headers:s.a.shape({}),auth:s.a.string,data:s.a.oneOfType(s.a.string,s.a.shape({}),s.a.arrayOf(s.a.any)),url:s.a.string.isRequired},i.defaultProps={method:"GET",headers:o.ACCEPT_ONLY,auth:null,data:null},t.b=i},73:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return p}));var n=a(0),r=a.n(n),l=a(4),s=a(1),c=a(35);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const m=e=>{let{value:{val:t,title:a,hint:n},onClick:l}=e,s=i(e.value,["val","title","hint"]);return t&&(s.value=t),r.a.createElement("li",null,r.a.createElement("a",{onClick:e=>l(e,s),title:n||null,dangerouslySetInnerHTML:{__html:a}}))},d=({values:e,onClick:t,renderElement:a})=>(a||(a=m),Object.keys(e).map((n,l)=>{if("object"==typeof e[n]){if(!e[n].type)return r.a.createElement(a,{key:l,value:e[n],onClick:t});{let s=e[n].title;switch(e[n].type){case"header":case"header-full":return r.a.createElement(r.a.Fragment,{key:l},r.a.createElement("a",{className:"dropdown__group-header"},s),e[n].values?r.a.createElement(d,{values:e[n].values,onClick:t,renderElement:a}):null);case"group":return r.a.createElement("div",{className:"submenu",key:l},r.a.createElement("a",null,s),r.a.createElement("div",{className:"dropdown__menu"},e[n].values?r.a.createElement(d,{values:e[n].values,onClick:t,renderElement:a}):null));case"link":case"rest":case"value":return r.a.createElement(a,{key:l,value:e[n],onClick:t})}}}else if("string"==typeof e[n])switch(e[n]){case"divider":return r.a.createElement("div",{key:l,className:"dropdown__divider"});case"loader":return r.a.createElement("a",{key:l},r.a.createElement("span",{className:"icon-animation spin","aria-hidden":"true"}),"Â Loading...");case"loader-error":return r.a.createElement("a",{key:l,className:"text--danger"},"Got an error on loading data.");case"empty":return r.a.createElement("a",{key:l},"Nothing saved.");default:return r.a.createElement(a,{key:l,value:{value:e[n],title:e[n]},onClick:t})}})),u=e=>{let{title:t,type:a,openTo:n}=e,l=i(e,["title","type","openTo"]);return r.a.createElement(s.Dropdown,{openTo:n||"left",header:t,type:a,className:"btn--link",alwaysClose:!0},r.a.createElement(d,l))},p=e=>{let{title:t,load_values:a,onClick:n,type:m,renderElement:u,openTo:p}=e,E=i(e,["title","load_values","onClick","type","renderElement","openTo"]);const f=Object(l.d)({deferFn:c.a,from:a}),b=r.a.useCallback(()=>f.run(),[f]);return r.a.createElement(s.Dropdown,o({openTo:p||"left",type:m,header:t,onOpen:b,className:"btn--link",alwaysClose:!0},E),r.a.createElement(l.c,{state:f},e=>(s.toast.error("Operation failed",e.message,!1),r.a.createElement(d,{values:["loader-error"]}))),r.a.createElement(l.b,{state:f},r.a.createElement(d,{values:["loader"]})),r.a.createElement(l.a,{state:f},e=>r.a.createElement(d,{values:e,onClick:n,renderElement:u})))}}}]);